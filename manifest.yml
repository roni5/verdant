modules:
  consumer:
    - key: queue-consumer
      queue: audit-queue
      resolver:
        function: reporter-function
        method: event-listener
  macro:
    - key: audit-macro
      function: macro
      title: Viridescent Reporter
      description: Web Carbon Report
  confluence:contextMenu:
    - key: audit-selector
      function: selector
      title: Audit Site
  confluence:globalPage:
    - key: gs
      function: global-stats
      title: Web Carbon Stats
      route: web-carbon-stats
  function:
    - key: selector
      handler: selector.run
    - key: macro
      handler: macro.run
    - key: reporter-function
      handler: reporter.handler
    - key: global-stats
      handler: global-stats.run

app:
  id: ari:cloud:ecosystem::app/6cf02130-bba5-4de8-8fd8-03a039f48355
permissions:
  external:
      fetch:
        backend:
          - 'https://admin.thegreenwebfoundation.org'
          - 'https://www.googleapis.com'
  scopes:
    - read:content-details:confluence
    - read:content.property:confluence
    - write:content.property:confluence
    - write:confluence-content
    - storage:app
    - write:project:jira
    - read:project:jira
    - manage:jira-configuration
    - read:jira-work